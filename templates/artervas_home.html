{% extends 'artervas_base.html' %}
{% load static %}

{% block title %}Art'Ervas - A melhor farmácia de manipulação da região{% endblock %}

{% block meta_description %}A melhor farmácia de manipulação da região. Frete grátis a partir de R$ 400,00, parcelamento até 4x sem juros e site 100% seguro. Medicamentos, suplementos e cosméticos.{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <div class="hero-badge">ATENÇÃO!</div>
            <h1 class="hero-title">Número Oficial do</h1>
            <h2 class="hero-subtitle">Nosso WhatsApp</h2>
            <div class="hero-phone">19 3623-4112</div>
            <div class="hero-logo">
                <img src="{% static 'img/artervas-logo-white.png' %}" alt="Art'Ervas" style="height: 60px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div style="display:none; color: white; font-size: 1.5rem; font-weight: bold;">
                    <i class="fas fa-leaf"></i> ART'ERVAS
                    <div style="font-size: 0.8rem; font-weight: normal; opacity: 0.8;">FARMÁCIA COM MANIPULAÇÃO</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Benefits Section -->
<section class="benefits-section">
    <div class="container">
        <h2 class="benefits-title">A MELHOR FARMÁCIA DE MANIPULAÇÃO DA REGIÃO</h2>
        <div class="benefits-grid">
            <div class="benefit-item">
                <div class="benefit-icon">
                    <i class="fas fa-shipping-fast"></i>
                </div>
                <h3 class="benefit-title">Frete Grátis</h3>
                <p class="benefit-description">
                    a partir de R$ 400,00<br>
                    para o estado de SP
                </p>
            </div>
            
            <div class="benefit-item">
                <div class="benefit-icon">
                    <i class="fas fa-credit-card"></i>
                </div>
                <h3 class="benefit-title">Parcelamento até 4x</h3>
                <p class="benefit-description">
                    sem juros no cartão de crédito
                </p>
            </div>
            
            <div class="benefit-item">
                <div class="benefit-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3 class="benefit-title">Segurança</h3>
                <p class="benefit-description">
                    Site 100% seguro
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products Section -->
<section class="products-section">
    <div class="container">
        <h2 class="section-title">DESTAQUES</h2>
        <div class="products-grid">
            {% for product in featured_products %}
            <div class="product-card fade-in-up">
                {% if product.discount_percentage %}
                    <div class="discount-badge">{{ product.discount_percentage }}% OFF</div>
                {% endif %}
                
                <a href="{{ product.get_absolute_url }}">
                    {% with main_image=product.get_main_image %}
                        {% if main_image %}
                            <img src="{{ main_image.image.url }}" alt="{{ product.name }}" class="product-image">
                        {% else %}
                            <div class="product-image d-flex align-items-center justify-content-center bg-light">
                                <i class="fas fa-pills fa-3x text-muted"></i>
                            </div>
                        {% endif %}
                    {% endwith %}
                </a>
                
                <div class="product-info">
                    <h3 class="product-name">
                        <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                    </h3>
                    
                    {% if product.original_price and product.original_price != product.price %}
                        <div class="product-original-price">
                            <del>R$ {{ product.original_price }}</del>
                        </div>
                    {% endif %}
                    
                    <div class="product-price">R$ {{ product.price }}</div>
                    
                    <div class="product-installments">
                        ou <strong>4x</strong> de <strong>R$ {{ product.installment_price }}</strong> sem juros
                    </div>
                    
                    <div class="product-actions">
                        <button class="btn-add-cart" onclick="addToCart({{ product.id }})">
                            <i class="fas fa-cart-plus"></i> Comprar
                        </button>
                        <button class="btn-wishlist" onclick="toggleWishlist({{ product.id }})">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            </div>
            {% empty %}
            <!-- Produtos de exemplo caso não existam produtos no banco -->
            <div class="product-card">
                <div class="product-image d-flex align-items-center justify-content-center bg-light">
                    <i class="fas fa-leaf fa-3x text-success"></i>
                </div>
                <div class="product-info">
                    <h3 class="product-name">AH NATU Funcho 30G</h3>
                    <div class="product-price">R$ 10,00</div>
                    <div class="product-installments">ou <strong>4x</strong> de <strong>R$ 2,50</strong> sem juros</div>
                    <div class="product-actions">
                        <button class="btn-add-cart">
                            <i class="fas fa-cart-plus"></i> Comprar
                        </button>
                        <button class="btn-wishlist">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="product-card">
                <div class="product-image d-flex align-items-center justify-content-center bg-light">
                    <i class="fas fa-pills fa-3x text-primary"></i>
                </div>
                <div class="product-info">
                    <h3 class="product-name">AH NATU CO Q10 30 Caps Softgel</h3>
                    <div class="product-price">R$ 69,90</div>
                    <div class="product-installments">ou <strong>4x</strong> de <strong>R$ 17,48</strong> sem juros</div>
                    <div class="product-actions">
                        <button class="btn-add-cart">
                            <i class="fas fa-cart-plus"></i> Comprar
                        </button>
                        <button class="btn-wishlist">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="product-card">
                <div class="discount-badge">15% OFF</div>
                <div class="product-image d-flex align-items-center justify-content-center bg-light">
                    <i class="fas fa-capsules fa-3x text-warning"></i>
                </div>
                <div class="product-info">
                    <h3 class="product-name">Cálcio + Vitamina D 60 Cápsulas</h3>
                    <div class="product-original-price">
                        <del>R$ 45,00</del>
                    </div>
                    <div class="product-price">R$ 38,30</div>
                    <div class="product-installments">ou <strong>4x</strong> de <strong>R$ 9,58</strong> sem juros</div>
                    <div class="product-actions">
                        <button class="btn-add-cart">
                            <i class="fas fa-cart-plus"></i> Comprar
                        </button>
                        <button class="btn-wishlist">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="product-card">
                <div class="product-image d-flex align-items-center justify-content-center bg-light">
                    <i class="fas fa-spray-can fa-3x text-info"></i>
                </div>
                <div class="product-info">
                    <h3 class="product-name">FILTRO COLOR ADAPT FPS 50</h3>
                    <p class="text-muted small">Protetor solar desenvolvido para uso diário.</p>
                    <div class="product-price">R$ 89,90</div>
                    <div class="product-installments">ou <strong>4x</strong> de <strong>R$ 22,48</strong> sem juros</div>
                    <div class="product-actions">
                        <button class="btn-add-cart">
                            <i class="fas fa-cart-plus"></i> Comprar
                        </button>
                        <button class="btn-wishlist">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <a href="{% url 'store:product_list' %}" class="btn btn-outline-success btn-lg">
                <i class="fas fa-eye"></i> Ver Todos os Produtos
            </a>
        </div>
    </div>
</section>

<!-- Categories Section -->
<section class="categories-section bg-light-green py-5">
    <div class="container">
        <h2 class="section-title">NOSSAS CATEGORIAS</h2>
        <div class="row g-4">
            <div class="col-md-3 col-6">
                <a href="{% url 'store:product_list' %}?category=medicamentos" class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-pills"></i>
                    </div>
                    <h4>Medicamentos</h4>
                    <p>Manipulados e industrializados</p>
                </a>
            </div>
            
            <div class="col-md-3 col-6">
                <a href="{% url 'store:product_list' %}?category=suplementos" class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-capsules"></i>
                    </div>
                    <h4>Suplementos</h4>
                    <p>Vitaminas e minerais</p>
                </a>
            </div>
            
            <div class="col-md-3 col-6">
                <a href="{% url 'store:product_list' %}?category=cosmeticos" class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-spa"></i>
                    </div>
                    <h4>Cosméticos</h4>
                    <p>Beleza e cuidados</p>
                </a>
            </div>
            
            <div class="col-md-3 col-6">
                <a href="{% url 'store:product_list' %}?category=fitoterapicos" class="category-card">
                    <div class="category-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h4>Fitoterápicos</h4>
                    <p>Produtos naturais</p>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- About Section -->
<section class="about-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h2 class="mb-4">Sobre a Art'Ervas</h2>
                <p class="lead">
                    Há mais de 15 anos cuidando da sua saúde com produtos de qualidade e atendimento personalizado.
                </p>
                <p>
                    Nossa farmácia de manipulação oferece medicamentos, suplementos e cosméticos personalizados, 
                    sempre com a supervisão de farmacêuticos qualificados e utilizando matérias-primas de primeira qualidade.
                </p>
                
                <div class="row mt-4">
                    <div class="col-6">
                        <div class="stat-item">
                            <div class="stat-number">15+</div>
                            <div class="stat-label">Anos de experiência</div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="stat-item">
                            <div class="stat-number">10k+</div>
                            <div class="stat-label">Clientes satisfeitos</div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4">
                    <a href="{% url 'core:about' %}" class="btn btn-success me-3">
                        <i class="fas fa-info-circle"></i> Saiba Mais
                    </a>
                    <a href="{% url 'core:contact' %}" class="btn btn-outline-success">
                        <i class="fas fa-envelope"></i> Entre em Contato
                    </a>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="about-image">
                    <img src="{% static 'img/farmacia-interior.jpg' %}" alt="Interior da Farmácia" class="img-fluid rounded shadow" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <div style="display:none; background: var(--light-green); padding: 100px; text-align: center; border-radius: 8px;">
                        <i class="fas fa-store fa-5x text-success mb-3"></i>
                        <h4>Nossa Farmácia</h4>
                        <p>Ambiente moderno e acolhedor</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section bg-primary-green text-white py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h2 class="mb-3">Receba nossas ofertas</h2>
                <p class="mb-4">Cadastre-se e seja o primeiro a saber sobre promoções, lançamentos e dicas de saúde.</p>
                
                <form class="newsletter-form" id="newsletterForm">
                    <div class="input-group input-group-lg">
                        <input type="email" class="form-control" placeholder="Seu melhor e-mail" required>
                        <button type="submit" class="btn btn-warning">
                            <i class="fas fa-paper-plane"></i> Cadastrar
                        </button>
                    </div>
                </form>
                
                <small class="mt-3 d-block opacity-75">
                    Não enviamos spam. Você pode cancelar a qualquer momento.
                </small>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
/* Category Cards */
.category-card {
    display: block;
    background: white;
    padding: 30px 20px;
    border-radius: var(--border-radius-lg);
    text-align: center;
    text-decoration: none;
    color: var(--dark-gray);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
    height: 100%;
}

.category-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-md);
    color: var(--dark-gray);
}

.category-icon {
    width: 80px;
    height: 80px;
    background: var(--light-green);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    font-size: 2rem;
    color: var(--primary-green);
    transition: var(--transition);
}

.category-card:hover .category-icon {
    background: var(--primary-green);
    color: white;
}

.category-card h4 {
    font-size: 1.2rem;
    font-weight: bold;
    margin-bottom: 10px;
}

.category-card p {
    font-size: 14px;
    color: var(--gray);
    margin: 0;
}

/* Stats */
.stat-item {
    text-align: center;
    margin-bottom: 20px;
}

.stat-number {
    font-size: 2.5rem;
    font-weight: bold;
    color: var(--primary-green);
    line-height: 1;
}

.stat-label {
    font-size: 14px;
    color: var(--gray);
    margin-top: 5px;
}

/* Newsletter */
.newsletter-form .input-group {
    max-width: 500px;
    margin: 0 auto;
}

.newsletter-form .form-control {
    border: none;
    border-radius: var(--border-radius) 0 0 var(--border-radius);
}

.newsletter-form .btn {
    border-radius: 0 var(--border-radius) var(--border-radius) 0;
    font-weight: 600;
}

/* Product Original Price */
.product-original-price {
    font-size: 14px;
    color: var(--gray);
    margin-bottom: 5px;
}

.product-original-price del {
    opacity: 0.7;
}

/* About Image */
.about-image {
    position: relative;
}

.about-image::after {
    content: '';
    position: absolute;
    top: 20px;
    left: 20px;
    right: -20px;
    bottom: -20px;
    background: var(--light-green);
    border-radius: var(--border-radius-lg);
    z-index: -1;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .hero-title {
        font-size: 2rem;
    }
    
    .hero-subtitle {
        font-size: 1.5rem;
    }
    
    .hero-phone {
        font-size: 2.5rem;
    }
    
    .benefits-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .category-icon {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }
    
    .stat-number {
        font-size: 2rem;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
// Newsletter form submission
document.getElementById('newsletterForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const email = this.querySelector('input[type="email"]').value;
    
    // Simulate newsletter subscription
    showNotification('E-mail cadastrado com sucesso! Obrigado por se inscrever.', 'success');
    this.reset();
});

// Add animation on scroll
function animateOnScroll() {
    const elements = document.querySelectorAll('.fade-in-up');
    
    elements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const elementVisible = 150;
        
        if (elementTop < window.innerHeight - elementVisible) {
            element.classList.add('fade-in-up');
        }
    });
}

window.addEventListener('scroll', animateOnScroll);
animateOnScroll(); // Run on page load

// Product interactions
function addToCart(productId) {
    // Simulate add to cart
    showNotification('Produto adicionado ao carrinho!', 'success');
    
    // Update cart count
    const cartCount = document.getElementById('cart-count');
    const currentCount = parseInt(cartCount.textContent) || 0;
    cartCount.textContent = currentCount + 1;
    
    // Add animation to cart icon
    const cartIcon = document.querySelector('.cart-icon');
    cartIcon.style.transform = 'scale(1.2)';
    setTimeout(() => {
        cartIcon.style.transform = 'scale(1)';
    }, 200);
}

function toggleWishlist(productId) {
    const button = event.target.closest('.btn-wishlist');
    const icon = button.querySelector('i');
    
    if (icon.classList.contains('far')) {
        icon.classList.remove('far');
        icon.classList.add('fas');
        button.style.background = 'var(--primary-green)';
        button.style.color = 'white';
        showNotification('Produto adicionado aos favoritos!', 'success');
    } else {
        icon.classList.remove('fas');
        icon.classList.add('far');
        button.style.background = 'white';
        button.style.color = 'var(--primary-green)';
        showNotification('Produto removido dos favoritos!', 'info');
    }
}
</script>
{% endblock %}
